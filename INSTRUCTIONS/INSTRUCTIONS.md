# SystemC Median Filter - Instructions

This file is part of the FPGAHS Lab from TU Kaiserslautern (TUK).
Author: Christian De Schryver



## Goals
After completing this lab, you should be able to...

* ... explain the core approaches and concepts of TLM 2.0.
* ... implement a Median filter in SystemC/TLM with internal memory.
* ... develop a SystemC module according to a given functional C++ model.



## Setup
The template for this task is contained in the "median.systemc" repository.

Please clone this repository to your working directory.
You will find template code for the given task and a file for the CMake build environment together with scripts for building and running the program.
In particular, execute...

* ... "./build.sh" to start the configuration and build process
* ... "./run.sh" to execute the generated binary
* ... "./clean.sh" to remove all build artefacts located in the "cmakebuild" folder.



## Task Descriptions


### Task 1: Setup

1) Clone the "polynomial.systemc" repository to your working directory. Explore its contents and see where everything is located.
2) Execute "./build.sh" to check if the build environment is set up correctly. You should run into errors since the Median filter module is not yet implemented.
3) Inspect the contents of the "./src" folder. You will find the following files:
   * "median_module.h" and "median_module.cpp" contain the actual Median filter implementation
   * "memory.h" and "memory.cpp" contain the memory module that is used to store the image internally
   * "median_tb.h" and "median_tb.cpp" contain the test bench for the complete module
   * "main.cpp" specifies the executable program that combines all modules to a complete simulation
   * "input_image.bmp" is an example source file fed into your Median filter implementation
   * "output_image_reference.bmp" is an example Median filtered version of the "input_image.bmp" file serving as a test oracle

 

### Task 2: Median Filter Implementation

1) Implement a Median filter module that filters an image stored inside a given memory module. Put your implementation into the "median_module.cpp" file. Your module needs to read and write from the attached memory.
2) Build your project with the "./build.sh" command. Debug and fix according to the displayed errors.
3) Run your project with the "./run.sh" command. The testbench writes the created image into the "output.bmp" file.
4) Analyze the "output.bmp" file generated by your Median filter and compare it with the "output_image_reference.bmp" file provided in the repository.




## Exam Questions
* What is TLM? What is its purpose?
* How does TLM communication differ from SystemC channels?
* What is the generic payload?
* Why is TLM simulation so much faster than plain SystemC communication?
* What is the difference between blocking and non-blocking protocols in TLM?
